(this["webpackJsonptimeline-prototype"]=this["webpackJsonptimeline-prototype"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c,i=n(3),o=n(1),r=n(9),s=n(5),l=["January","February","March","April","May","June","July","August","September","October","November","December"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=function(e,t){switch(e){case"month":return"".concat(t.getFullYear());default:return"".concat(l[t.getMonth()]," ").concat(t.getFullYear())}},m=function(e,t){switch(e){case"month":return"".concat(l[t.getMonth()].substring(0,3));default:return"".concat(t.getDate())}},h=function(e,t){switch(e){case"month":return"".concat(l[t.getMonth()]," ").concat(t.getFullYear());default:return"".concat(d[t.getDay()],", ").concat(l[t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())}},j=function(e,t,n){for(var a=[],c=new Date,i=[],o=new Date(t),r=new Date(t);o<n;)"month"===e?(o.setMonth(o.getMonth()+1),c.setDate(1)):o.setDate(o.getDate()+1),("day"===e&&r.getMonth()!==o.getMonth()||"month"===e&&r.getFullYear()!==o.getFullYear())&&(a.push({label:u(e,r),items:i}),i=[]),i.push({labelTitle:h(e,o),label:m(e,o),active:o.toDateString()===c.toDateString(),date:new Date(o)}),1,r=new Date(o);return a.push({label:u(e,r),items:i}),a},b=function(e,t){t="object"===typeof t?JSON.stringify(t):t,localStorage.setItem(e,t)},f=function(e){return JSON.parse(localStorage.getItem(e))},g=600,O=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?1:-1,a={day:[7,15,31],month:[7,13]};window.innerWidth<g&&(a={day:[3,5],month:[3,5]});var c=Object.keys(a),i=e.type||"day",o=e.count||a[i][1],r=a[i],s=r.indexOf(o)+n,l=c.indexOf(i);null===t&&(n=0,s=0),(s>=r.length||s<0)&&((r=a[c[l+=n]])||(r=a[c[l=u(c.length)]]),s=u(r.length));var d="day"===c[l]?1:.25;return{type:c[l],count:r[s],max:l+1>=c.length&&s+1>=r.length,min:0===l&&0===s,height:d+.5*(r.length-s)};function u(e){return t?0:e+n}},v=O({},null),p=function(e,t){return Math.round((t-e)/864e5)},y=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},x=function(e,t,n){var a=y(e),c=0;if(n)c+=t.getDate()/a;else if(e.getMonth()!==t.getMonth()){c+=(a-e.getDate())/a;y(t);c+=t.getDate()/y(t)-1}else c+=(t.getDate()-e.getDate())/a;return c||(c=1/a),t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())+c},N=[{id:1,start:"2021-01-14",end:"2021-01-22",name:"Recruit translators"},{id:2,start:"2021-01-17",end:"2021-01-31",name:"Create lesson plan 1"},{id:3,start:"2021-02-05",end:"2021-02-13",name:"Translate phrases for lesson 1"},{id:4,start:"2021-02-07",end:"2021-03-08",name:"Create dark mode design"},{id:5,start:"2021-02-14",end:"2021-02-22",name:"Recruit copyeditors"},{id:6,start:"2021-02-18",end:"2021-02-24",name:"Proofread translations for lesson 1"},{id:7,start:"2021-02-20",end:"2021-02-22",name:"Finalize logo"},{id:8,start:"2021-02-21",end:"2021-03-22",name:"Implement dark mode"},{id:9,start:"2021-02-21",end:"2021-02-28",name:"Finalize lesson plan 1"},{id:10,start:"2021-02-23",end:"2021-02-23",name:"Approve logo"},{id:11,start:"2021-03-03",end:"2021-03-29",name:"Create lesson plan 2"},{id:12,start:"2021-03-30",end:"2021-04-08",name:"Translate phrases for lesson 2"},{id:13,start:"2021-04-01",end:"2021-04-04",name:"Debug mobile notification error"},{id:14,start:"2021-04-05",end:"2021-04-06",name:"Test debugged mobile notifications"},{id:15,start:"2021-04-16",end:"2021-04-30",name:"Beta test"},{id:16,start:"2021-05-01",end:"2021-05-01",name:"Launch day"},{id:"zxcv",start:"2021-06-26",end:"2021-06-29",name:"Something happened on this day"},{id:"asdf",start:"2021-06-28",end:"2021-06-30",name:"Happy days"},{id:"qwer",start:"2021-07-01",end:"2021-07-30",name:"Gilligan's Island"}],_="air",D=n(2),w=n.n(D),S=(n(14),n(0)),E=function(e){var t=e.manageEditor,n=e.children,a=e.onScroll,c=e.inView,i=e.groups,o=void 0===i?[]:i;return Object(S.jsxs)("div",{className:"".concat(_,"--timeline-bg"),onScroll:a,children:[n,Object(S.jsx)("ul",{className:"".concat(_,"--timeline-bg__groups"),children:o.map((function(e){var t=e.label,n=e.items;return Object(S.jsxs)("li",{children:[Object(S.jsx)("p",{className:"".concat(_,"--timeline-bg__group-label"),children:Object(S.jsx)("span",{children:t})}),Object(S.jsx)("ul",{className:"".concat(_,"--timeline-bg__items"),children:n.map((function(e){var t=e.date,n=e.label,a=e.labelTitle,i=e.active;return Object(S.jsx)("li",{onClick:r,"data-date":t,className:w()("".concat(_,"--timeline-bg__item"),i?"".concat(_,"--timeline-bg--item-active"):""),title:a,style:{width:"calc((100vw - 2rem) / ".concat(c,")")},children:n},a)}))})]},t)}))})]});function r(e){var n=new Date(e.target.dataset.date);t({isOpen:!0,startDate:"".concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getFullYear())})}},M=(n(16),function(e){var t=e.manageEditor,n=e.zoom,a=e.startRangeDate,c=e.lanes,r=void 0===c?[]:c,s=Object(o.useState)("".concat(_,"--timeline-events--hide")),l=Object(i.a)(s,2),d=l[0],u=l[1],m=new Date;"month"===n.type?x(a,m,!0):p(a,m);return Object(o.useEffect)((function(){console.log(r),u("")}),[]),Object(S.jsx)("div",{className:w()("".concat(_,"--timeline-events"),d),children:Object(S.jsx)("ul",{children:r.map((function(e,t){return console.log(r),e.map((function(e){var c=.25,i=new Date(e.start+" 00:00:00"),o=new Date(e.end+" 23:59:59"),r="month"===n.type?x(i,o):p(i,o),s="month"===n.type?x(a,i,!0)-1:p(a,i)-1,l=m>=o,d=l?"".concat(_,"--timeline-event--expired"):"",u=l?"(expired) ":"";return Object(S.jsx)("li",{style:{minHeight:n.height+"rem",left:"calc((100vw - 2rem) / ".concat(n.count," * ").concat(s," + ").concat(.125,"rem)"),top:"".concat((n.height+c)*t,"rem"),width:"calc((100vw - 2rem) / ".concat(n.count," * ").concat(r," - ").concat(c,"rem)"),borderRadius:"".concat(n.height/2,"rem"),transitionDelay:150*t+"ms"},"data-event":JSON.stringify(e),title:"".concat(u).concat(e.name,": ").concat(e.start," \u2013 ").concat(e.end),className:w()("".concat(_,"--timeline-event"),"".concat(_,"--timeline-event--").concat(n.type),"".concat(_,"--timeline-event--").concat(n.count),d),onClick:h,children:Object(S.jsx)("span",{className:"".concat(_,"--timeline-event__title"),children:e.name})},e.start+e.end)}))}))})});function h(e){var n=JSON.parse(e.target.dataset.event);t({isOpen:!0,event:n})}}),k=n(6),F=n(4),C=(n(17),["type","children","className","href"]),W=function(e){var t=e.type,n=e.children,a=e.className,c=e.href,i=Object(F.a)(e,C),o=c?"a":"button";return Object(S.jsx)(o,Object(k.a)(Object(k.a)({href:c,className:w()("".concat(_,"--button"),"".concat(_,"--button--").concat(t),a)},i),{},{children:n}))},T=(n(18),!1),z=function(e){var t=e.onZoom,n=Object(o.useState)(f("air-zoom")||v),a=Object(i.a)(n,2),c=a[0],r=a[1],s=Object(o.useState)(window.innerWidth<g?"mobile":"desktop"),l=Object(i.a)(s,2),d=l[0],u=l[1];function m(e,n){var a=O(e,n);r(a),b("air-zoom",a),t(a)}return Object(o.useEffect)((function(){T&&m(v,null)}),[d]),Object(o.useEffect)((function(){T=!0,window.addEventListener("resize",(function(){window.innerWidth<g?u("mobile"):u("desktop")}))}),[]),Object(S.jsxs)("aside",{className:"".concat(_,"--zoom"),children:[Object(S.jsx)(W,{"aria-label":"Zoom out",onClick:function(){return m(c,!0)},disabled:c.max,children:Object(S.jsx)("i",{className:"fas fa-minus"})}),Object(S.jsx)(W,{"aria-label":"Zoom in",onClick:function(){return m(c,!1)},disabled:c.min,children:Object(S.jsx)("i",{className:"fas fa-plus"})})]})},Y=(n(19),!1),q=!1,J=function(e){var t=e.events,n=e.manageEditor,a=f("air-zoom")||v,c=new Date,r=new Date,l=Object(o.useState)(a),d=Object(i.a)(l,2),u=d[0],m=d[1],h=Object(o.useState)(Math.floor(a.count/2)+1),b=Object(i.a)(h,2),g=b[0],O=b[1],p=Object(o.useState)(Math.floor(a.count/2)+1),y=Object(i.a)(p,2),x=y[0],N=y[1];return"month"===u.type?(c.setDate(1),c.setMonth(c.getMonth()-(g+1)),r.setDate(1),r.setMonth(r.getMonth()+x)):(c.setDate(c.getDate()-(g+1)),r.setDate(r.getDate()+x)),Object(o.useEffect)((function(){var e=document.querySelector(".".concat(_,"--timeline-bg")),t=(e.scrollWidth-e.offsetWidth)/2;e.scroll({left:t+8}),q=!0}),[]),Object(S.jsxs)("article",{className:w()("".concat(_,"--timeline")),children:[Object(S.jsx)(E,{manageEditor:n,onScroll:function(e){if(q&&!window.infinityScroll){var t=e.target,n=t.querySelectorAll(".".concat(_,"--timeline-bg__item")),a=t.querySelector(".".concat(_,"--timeline-bg__groups")),c=(t.querySelector(".".concat(_,"--timeline-events")),a.scrollWidth/n.length),i=Math.floor(u.count/2)+1;t.scrollLeft<=.95*c?(t.scroll({left:(i+1)*c}),O(g+i),Y=!0):t.scrollLeft>=a.scrollWidth-a.offsetWidth-.95*c&&(N(x+i),Y=!0)}},groups:j(u.type,c,r),inView:u.count,children:Object(S.jsx)(M,{manageEditor:n,lanes:function(){var e=function(e){var t=e.sort((function(e,t){return new Date(e.start)-new Date(t.start)})),n=[];function a(e){var t,a=Object(s.a)(n);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(new Date(c[c.length-1].end)<new Date(e.start))return void c.push(e)}}catch(i){a.e(i)}finally{a.f()}n.push([e])}var c,i=Object(s.a)(t);try{for(i.s();!(c=i.n()).done;)a(c.value)}catch(o){i.e(o)}finally{i.f()}return n}(t);return e=e.map((function(e){return e.filter((function(e){return function(e){var t=new Date(e.start+" 00:00:00"),n=new Date(e.end+" 23:59:59");return t>=c&&t<=r||n>=c&&n<=r}(e)}))})),console.log(e),e}(),zoom:u,startRangeDate:c})}),Object(S.jsx)(z,{onZoom:function(e){var t=Math.floor(e.count/2)+1;m(e),(g<t||!Y)&&O(t);(x<t||!Y)&&N(t)}})]})},L=(n(20),function(){var e=Object(o.useState)(f("air-theme")||!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){n?document.body.classList.add("".concat(_,"--theme--dark")):document.body.classList.remove("".concat(_,"--theme--dark"))})),Object(S.jsxs)("label",{className:"".concat(_,"--theme-switcher"),title:"Switch themes","aria-label":"Switch themes",children:[Object(S.jsx)("input",{type:"checkbox",checked:n,onChange:function(e){var t=e.target.checked;a(t),b("air-theme",t)}}),Object(S.jsx)("span",{className:"".concat(_,"--button"),children:Object(S.jsx)("i",{className:w()("fas",n?"fa-sun":"fa-moon")})})]})}),I=(n(21),["onClose","settings","isOpen","children","className"]),V=function(e){var t=e.onClose,n=e.settings,a=e.isOpen,c=e.children,i=e.className,o=(Object(F.a)(e,I),a?"".concat(_,"--modal--open"):"");return Object(S.jsxs)("aside",{className:w()("".concat(_,"--modal"),o),children:[Object(S.jsxs)("div",{className:w()("".concat(_,"--modal__container"),i),children:[Object(S.jsx)(W,{className:"".concat(_,"--modal__close"),"aria-label":"Close",onClick:r,children:Object(S.jsx)("i",{className:"fas fa-times"})}),c]}),Object(S.jsx)("div",{className:"".concat(_,"--modal__bg"),onClick:r})]});function r(){n({isOpen:!1}),t()}},R=(n(22),["className"]),A=function(e){var t=e.className,n=Object(F.a)(e,R);return Object(S.jsx)("input",Object(k.a)({className:w()("".concat(_,"--input"),t)},n))},Z=(n(23),["events","setEvents","settings","editorStatus"]),B=function(e){var t=e.events,n=e.setEvents,a=e.settings,c=e.editorStatus,o=(Object(F.a)(e,Z),c.event?"Edit":"New"),r=Math.round(1e3*Math.random()),l=c.startDate||"",d="",u="";return c.event&&(r=c.event.id||r,l=c.event.start,d=c.event.end||d,u=c.event.name||u),Object(S.jsx)(V,{className:"".concat(_,"--timeline-editor"),isOpen:c.isOpen,settings:a,onClose:j,children:c.isOpen&&Object(S.jsxs)("form",{className:"".concat(_,"--timeline-editor__form"),onSubmit:function(e){e.preventDefault();var a=m(),c=h(t,a.id);t[c]?t[c]=a:t.push(a);n(t),j()},children:[Object(S.jsxs)("h2",{className:"".concat(_,"--timeline-editor__title"),children:[o," event"]}),Object(S.jsxs)("div",{className:"".concat(_,"--timeline-editor__group"),children:[Object(S.jsx)("label",{className:"".concat(_,"--timeline-editor__label"),htmlFor:"name",children:"Event name"}),Object(S.jsx)(A,{className:"".concat(_,"--timeline-editor__input"),type:"text",name:"name",id:"name",defaultValue:u})]}),Object(S.jsxs)("div",{className:"".concat(_,"--timeline-editor__group"),children:[Object(S.jsx)("label",{className:"".concat(_,"--timeline-editor__label"),htmlFor:"start",children:"Start date"}),Object(S.jsx)(A,{className:"".concat(_,"--timeline-editor__input"),type:"text",name:"start",id:"start",placeholder:"mm/dd/yyyy",defaultValue:l})]}),Object(S.jsxs)("div",{className:"".concat(_,"--timeline-editor__group"),children:[Object(S.jsx)("label",{className:"".concat(_,"--timeline-editor__label"),htmlFor:"end",children:"End date"}),Object(S.jsx)(A,{className:"".concat(_,"--timeline-editor__input"),type:"text",name:"end",id:"end",placeholder:"mm/dd/yyyy",defaultValue:d})]}),Object(S.jsx)("input",{type:"hidden",name:"id",id:"id",defaultValue:r}),Object(S.jsx)(W,{className:"".concat(_,"--timeline-editor__btn"),type:"primary",children:"Save"}),"Edit"===o&&Object(S.jsx)(W,{className:"".concat(_,"--timeline-editor__btn"),type:"danger","aria-label":"Delete",onClick:function(e){e.preventDefault();var a=m(),c=h(t,a.id);t[c]&&t.splice(c,1);n(t),j()},children:Object(S.jsx)("i",{className:"fas fa-trash-alt"})})]})});function m(e){var t,n={},a=document.querySelector(".".concat(_,"--timeline-editor__form")),c=new FormData(a),o=Object(s.a)(c.entries());try{for(o.s();!(t=o.n()).done;){var r=Object(i.a)(t.value,2),l=r[0],d=r[1];n[l]=d}}catch(u){o.e(u)}finally{o.f()}return n.end||(n.end=n.start),n.name||(n.name="".concat(n.start,"-").concat(n.end)),n}function h(e,t){var n;return e.forEach((function(e,a){""+e.id===t&&(n=a)})),n}function j(){a({isOpen:!1,startDate:"",event:{name:"",id:"",start:"",end:""}})}},H=(n(24),function(){var e=Object(o.useState)(!0),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)(l,[]),Object(S.jsx)(W,{onClick:function(){var e=document.querySelector(".".concat(_,"--timeline-bg")),t=e.querySelector(".".concat(_,"--timeline-bg--item-active"));e.scroll({left:t.offsetLeft-(e.offsetWidth-t.offsetWidth)/2,behavior:"smooth"}),r(!0),l()},disabled:n,children:"Today"});function s(e){var t=e.target;clearInterval(a),a=setTimeout((function(){c&&(c=!1)}),200),c||(r(!1),t.removeEventListener("scroll",s))}function l(){var e=document.querySelector(".".concat(_,"--timeline-bg"));c=!0,e.addEventListener("scroll",s)}}),G=(n(25),function(e){var t=e.manageEditor;return Object(S.jsx)("aside",{className:"".concat(_,"--controls"),children:Object(S.jsxs)("ul",{className:"".concat(_,"--controls__group"),children:[Object(S.jsx)("li",{className:"".concat(_,"--controls__group-divider"),children:Object(S.jsx)(W,{type:"primary",onClick:function(){t({isOpen:!0})},children:"New event"})}),Object(S.jsx)("li",{children:Object(S.jsx)(H,{})}),Object(S.jsx)("li",{children:Object(S.jsx)(L,{})})]})})}),K=(n(26),f("air-title")||{val:"Timeline"}),P=function(e){var t=e.manageEditor,n=Object(o.useState)(K),a=Object(i.a)(n,2),c=a[0];a[1];return Object(S.jsxs)("header",{className:"".concat(_,"--header"),children:[Object(S.jsx)(G,{manageEditor:t}),Object(S.jsx)("h1",{onKeyUp:function(e){b("air-title",{val:e.target.innerText})},className:"".concat(_,"--page-title"),suppressContentEditableWarning:!0,contentEditable:"true",children:c.val})]})};n(27);f("air-events")||b("air-events",N.map((function(e){var t=e.start.split("-"),n=e.end.split("-");return t.push(t.shift()),n.push(n.shift()),e.start=t.join("/"),e.end=n.join("/"),e})));var U=function(){var e=Object(o.useState)({}),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(f("air-events")||[]),r=Object(i.a)(c,2),s=r[0],l=r[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P,{manageEditor:d}),Object(S.jsx)(J,{manageEditor:d,events:s}),Object(S.jsx)(B,{editorStatus:n,settings:d,events:s,setEvents:function(e){l(e),b("air-events",e)}})]});function d(e){a(e)}};Object(r.render)(Object(S.jsx)(U,{}),document.getElementById("root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.9a621c90.chunk.js.map