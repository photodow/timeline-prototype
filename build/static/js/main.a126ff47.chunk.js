(this["webpackJsonptimeline-prototype"]=this["webpackJsonptimeline-prototype"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c,i=n(3),r=n(1),o=n(9),s=n(5),l=["January","February","March","April","May","June","July","August","September","October","November","December"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=function(e,t){switch(e){case"month":return"".concat(t.getFullYear());default:return"".concat(l[t.getMonth()]," ").concat(t.getFullYear())}},m=function(e,t){switch(e){case"month":return"".concat(l[t.getMonth()].substring(0,3));default:return"".concat(t.getDate())}},h=function(e,t){switch(e){case"month":return"".concat(l[t.getMonth()]," ").concat(t.getFullYear());default:return"".concat(d[t.getDay()],", ").concat(l[t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())}},f=function(e,t,n){for(var a=[],c=new Date,i=[],r=new Date(t),o=new Date(t);r<n;)"month"===e?(r.setMonth(r.getMonth()+1),c.setDate(1)):r.setDate(r.getDate()+1),("day"===e&&o.getMonth()!==r.getMonth()||"month"===e&&o.getFullYear()!==r.getFullYear())&&(a.push({label:u(e,o),items:i}),i=[]),i.push({labelTitle:h(e,r),label:m(e,r),active:r.toDateString()===c.toDateString(),date:new Date(r)}),1,o=new Date(r);return a.push({label:u(e,o),items:i}),a},b=function(e,t){t="object"===typeof t?JSON.stringify(t):t,localStorage.setItem(e,t)},j=function(e){return JSON.parse(localStorage.getItem(e))},g=600,O=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?1:-1,a={day:[7,15,31],month:[7,13]};window.innerWidth<g&&(a={day:[3,5],month:[3,5]});var c=Object.keys(a),i=e.type||"day",r=e.count||a[i][1],o=a[i],s=o.indexOf(r)+n,l=c.indexOf(i);null===t&&(n=0,s=0),(s>=o.length||s<0)&&((o=a[c[l+=n]])||(o=a[c[l=u(c.length)]]),s=u(o.length));var d="day"===c[l]?1:.25;return{type:c[l],count:o[s],max:l+1>=c.length&&s+1>=o.length,min:0===l&&0===s,height:d+.5*(o.length-s)};function u(e){return t?0:e+n}},p=O({},null),v=function(e,t){return Math.round((t-e)/864e5)},y=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},x=function(e,t,n){var a=y(e),c=0;if(n)c+=t.getDate()/a;else if(e.getMonth()!==t.getMonth()){c+=(a-e.getDate())/a;y(t);c+=t.getDate()/y(t)-1}else c+=(t.getDate()-e.getDate())/a;return c||(c=1/a),t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())+c},N=[{id:1,start:"2021-01-14",end:"2021-01-22",name:"Recruit translators"},{id:2,start:"2021-01-17",end:"2021-01-31",name:"Create lesson plan 1"},{id:3,start:"2021-02-05",end:"2021-02-13",name:"Translate phrases for lesson 1"},{id:4,start:"2021-02-07",end:"2021-03-08",name:"Create dark mode design"},{id:5,start:"2021-02-14",end:"2021-02-22",name:"Recruit copyeditors"},{id:6,start:"2021-02-18",end:"2021-02-24",name:"Proofread translations for lesson 1"},{id:7,start:"2021-02-20",end:"2021-02-22",name:"Finalize logo"},{id:8,start:"2021-02-21",end:"2021-03-22",name:"Implement dark mode"},{id:9,start:"2021-02-21",end:"2021-02-28",name:"Finalize lesson plan 1"},{id:10,start:"2021-02-23",end:"2021-02-23",name:"Approve logo"},{id:11,start:"2021-03-03",end:"2021-03-29",name:"Create lesson plan 2"},{id:12,start:"2021-03-30",end:"2021-04-08",name:"Translate phrases for lesson 2"},{id:13,start:"2021-04-01",end:"2021-04-04",name:"Debug mobile notification error"},{id:14,start:"2021-04-05",end:"2021-04-06",name:"Test debugged mobile notifications"},{id:15,start:"2021-04-16",end:"2021-04-30",name:"Beta test"},{id:16,start:"2021-05-01",end:"2021-05-01",name:"Launch day"},{id:"zxcv",start:"2021-06-26",end:"2021-06-29",name:"Something happened on this day"},{id:"asdf",start:"2021-06-28",end:"2021-06-30",name:"Happy days"},{id:"qwer",start:"2021-07-01",end:"2021-07-30",name:"Gilligan's Island"},{id:111,start:"2021-07-14",end:"2021-01-22",name:"Recruit translators"},{id:112,start:"2021-08-17",end:"2021-01-31",name:"Create lesson plan 1"},{id:113,start:"2021-09-05",end:"2021-02-13",name:"Translate phrases for lesson 1"},{id:114,start:"2021-07-07",end:"2021-03-08",name:"Create dark mode design"},{id:115,start:"2021-08-14",end:"2021-02-22",name:"Recruit copyeditors"},{id:116,start:"2021-09-18",end:"2021-02-24",name:"Proofread translations for lesson 1"},{id:117,start:"2021-07-20",end:"2021-02-22",name:"Finalize logo"},{id:118,start:"2021-08-21",end:"2021-03-22",name:"Implement dark mode"},{id:119,start:"2021-09-21",end:"2021-02-28",name:"Finalize lesson plan 1"},{id:1110,start:"2021-10-23",end:"2021-02-23",name:"Approve logo"},{id:1111,start:"2021-11-03",end:"2021-03-29",name:"Create lesson plan 2"},{id:1112,start:"2021-12-30",end:"2021-04-08",name:"Translate phrases for lesson 2"},{id:1113,start:"2021-10-01",end:"2021-04-04",name:"Debug mobile notification error"},{id:1114,start:"2021-11-05",end:"2021-04-06",name:"Test debugged mobile notifications"},{id:1115,start:"2021-12-16",end:"2021-04-30",name:"Beta test"},{id:1116,start:"2021-10-01",end:"2021-05-01",name:"Launch day"}],D="air",_=n(2),w=n.n(_),S=(n(14),n(0)),E=function(e){var t=e.manageEditor,n=e.children,a=e.onScroll,c=e.inView,i=e.groups,r=void 0===i?[]:i;return Object(S.jsxs)("div",{className:"".concat(D,"--timeline-bg"),onScroll:a,children:[n,Object(S.jsx)("ul",{className:"".concat(D,"--timeline-bg__groups"),children:r.map((function(e){var t=e.label,n=e.items;return Object(S.jsxs)("li",{children:[Object(S.jsx)("p",{className:"".concat(D,"--timeline-bg__group-label"),children:Object(S.jsx)("span",{children:t})}),Object(S.jsx)("ul",{className:"".concat(D,"--timeline-bg__items"),children:n.map((function(e){var t=e.date,n=e.label,a=e.labelTitle,i=e.active;return Object(S.jsx)("li",{onClick:o,"data-date":t,className:w()("".concat(D,"--timeline-bg__item"),i?"".concat(D,"--timeline-bg--item-active"):""),title:a,style:{width:"calc((100vw - 2rem) / ".concat(c,")")},children:n},a)}))})]},t)}))})]});function o(e){var n=new Date(e.target.dataset.date);t({isOpen:!0,startDate:"".concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getFullYear())})}},M=(n(16),function(e){var t=e.manageEditor,n=e.zoom,a=e.startRangeDate,c=e.lanes,o=void 0===c?[]:c,s=Object(r.useState)("".concat(D,"--timeline-events--hide")),l=Object(i.a)(s,2),d=l[0],u=l[1],m=new Date;"month"===n.type?x(a,m,!0):v(a,m);return Object(r.useEffect)((function(){console.log(o),u("")}),[]),Object(S.jsx)("div",{className:w()("".concat(D,"--timeline-events"),d),children:Object(S.jsx)("ul",{children:o.map((function(e,t){return console.log(o),e.map((function(e){var c=.25,i=new Date(e.start+" 00:00:00"),r=new Date(e.end+" 23:59:59"),o="month"===n.type?x(i,r):v(i,r),s="month"===n.type?x(a,i,!0)-1:v(a,i)-1,l=m>=r,d=l?"".concat(D,"--timeline-event--expired"):"",u=l?"(expired) ":"";return Object(S.jsx)("li",{style:{minHeight:n.height+"rem",left:"calc((100vw - 2rem) / ".concat(n.count," * ").concat(s," + ").concat(.125,"rem)"),top:"".concat((n.height+c)*t,"rem"),width:"calc((100vw - 2rem) / ".concat(n.count," * ").concat(o," - ").concat(c,"rem)"),borderRadius:"".concat(n.height/2,"rem"),transitionDelay:150*t+"ms"},"data-event":JSON.stringify(e),title:"".concat(u).concat(e.name,": ").concat(e.start," \u2013 ").concat(e.end),className:w()("".concat(D,"--timeline-event"),"".concat(D,"--timeline-event--").concat(n.type),"".concat(D,"--timeline-event--").concat(n.count),d),onClick:h,children:Object(S.jsx)("span",{className:"".concat(D,"--timeline-event__title"),children:e.name})},e.start+e.end)}))}))})});function h(e){var n=JSON.parse(e.target.dataset.event);t({isOpen:!0,event:n})}}),k=n(6),C=n(4),F=(n(17),["type","children","className","href"]),T=function(e){var t=e.type,n=e.children,a=e.className,c=e.href,i=Object(C.a)(e,F),r=c?"a":"button";return Object(S.jsx)(r,Object(k.a)(Object(k.a)({href:c,className:w()("".concat(D,"--button"),"".concat(D,"--button--").concat(t),a)},i),{},{children:n}))},z=(n(18),!1),W=function(e){var t=e.onZoom,n=Object(r.useState)(j("air-zoom")||p),a=Object(i.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(window.innerWidth<g?"mobile":"desktop"),l=Object(i.a)(s,2),d=l[0],u=l[1];function m(e,n){var a=O(e,n);o(a),b("air-zoom",a),t(a)}return Object(r.useEffect)((function(){z&&m(p,null)}),[d]),Object(r.useEffect)((function(){z=!0,window.addEventListener("resize",(function(){window.innerWidth<g?u("mobile"):u("desktop")}))}),[]),Object(S.jsxs)("aside",{className:"".concat(D,"--zoom"),children:[Object(S.jsx)(T,{"aria-label":"Zoom out",onClick:function(){return m(c,!0)},disabled:c.max,children:Object(S.jsx)("i",{className:"fas fa-minus"})}),Object(S.jsx)(T,{"aria-label":"Zoom in",onClick:function(){return m(c,!1)},disabled:c.min,children:Object(S.jsx)("i",{className:"fas fa-plus"})})]})},L=(n(19),!1),Y=!1,q=function(e){var t=e.events,n=e.manageEditor,a=j("air-zoom")||p,c=new Date,o=new Date,l=Object(r.useState)(a),d=Object(i.a)(l,2),u=d[0],m=d[1],h=Object(r.useState)(Math.floor(a.count/2)+1),b=Object(i.a)(h,2),g=b[0],O=b[1],v=Object(r.useState)(Math.floor(a.count/2)+1),y=Object(i.a)(v,2),x=y[0],N=y[1];return"month"===u.type?(c.setDate(1),c.setMonth(c.getMonth()-(g+1)),o.setDate(1),o.setMonth(o.getMonth()+x)):(c.setDate(c.getDate()-(g+1)),o.setDate(o.getDate()+x)),Object(r.useEffect)((function(){var e=document.querySelector(".".concat(D,"--timeline-bg")),t=(e.scrollWidth-e.offsetWidth)/2;e.scroll({left:t+8}),Y=!0}),[]),Object(S.jsxs)("article",{className:w()("".concat(D,"--timeline")),children:[Object(S.jsx)(E,{manageEditor:n,onScroll:function(e){if(Y&&!window.infinityScroll){var t=e.target,n=t.querySelectorAll(".".concat(D,"--timeline-bg__item")),a=t.querySelector(".".concat(D,"--timeline-bg__groups")),c=(t.querySelector(".".concat(D,"--timeline-events")),a.scrollWidth/n.length),i=Math.floor(u.count/2)+1;t.scrollLeft<=.95*c?(t.scroll({left:(i+1)*c}),O(g+i),L=!0):t.scrollLeft>=a.scrollWidth-a.offsetWidth-.95*c&&(N(x+i),L=!0)}},groups:f(u.type,c,o),inView:u.count,children:Object(S.jsx)(M,{manageEditor:n,lanes:function(){var e=function(e){var t=e.sort((function(e,t){return new Date(e.start)-new Date(t.start)})),n=[];function a(e){var t,a=Object(s.a)(n);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(new Date(c[c.length-1].end)<new Date(e.start))return void c.push(e)}}catch(i){a.e(i)}finally{a.f()}n.push([e])}var c,i=Object(s.a)(t);try{for(i.s();!(c=i.n()).done;)a(c.value)}catch(r){i.e(r)}finally{i.f()}return n}(t);return e=e.map((function(e){return e.filter((function(e){return function(e){var t=new Date(e.start+" 00:00:00"),n=new Date(e.end+" 23:59:59");return t>=c&&t<=o||n>=c&&n<=o}(e)}))})),console.log(e),e}(),zoom:u,startRangeDate:c})}),Object(S.jsx)(W,{onZoom:function(e){var t=Math.floor(e.count/2)+1;m(e),(g<t||!L)&&O(t);(x<t||!L)&&N(t)}})]})},J=(n(20),function(){var e=Object(r.useState)(j("air-theme")||!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){n?document.body.classList.add("".concat(D,"--theme--dark")):document.body.classList.remove("".concat(D,"--theme--dark"))})),Object(S.jsxs)("label",{className:"".concat(D,"--theme-switcher"),title:"Switch themes","aria-label":"Switch themes",children:[Object(S.jsx)("input",{type:"checkbox",checked:n,onChange:function(e){var t=e.target.checked;a(t),b("air-theme",t)}}),Object(S.jsx)("span",{className:"".concat(D,"--button"),children:Object(S.jsx)("i",{className:w()("fas",n?"fa-sun":"fa-moon")})})]})}),I=(n(21),["onClose","settings","isOpen","children","className"]),R=function(e){var t=e.onClose,n=e.settings,a=e.isOpen,c=e.children,i=e.className,r=(Object(C.a)(e,I),a?"".concat(D,"--modal--open"):"");return Object(S.jsxs)("aside",{className:w()("".concat(D,"--modal"),r),children:[Object(S.jsxs)("div",{className:w()("".concat(D,"--modal__container"),i),children:[Object(S.jsx)(T,{className:"".concat(D,"--modal__close"),"aria-label":"Close",onClick:o,children:Object(S.jsx)("i",{className:"fas fa-times"})}),c]}),Object(S.jsx)("div",{className:"".concat(D,"--modal__bg"),onClick:o})]});function o(){n({isOpen:!1}),t()}},V=(n(22),["className"]),A=function(e){var t=e.className,n=Object(C.a)(e,V);return Object(S.jsx)("input",Object(k.a)({className:w()("".concat(D,"--input"),t)},n))},Z=(n(23),["events","setEvents","settings","editorStatus"]),B=function(e){var t=e.events,n=e.setEvents,a=e.settings,c=e.editorStatus,r=(Object(C.a)(e,Z),c.event?"Edit":"New"),o=Math.round(1e3*Math.random()),l=c.startDate||"",d="",u="";return c.event&&(o=c.event.id||o,l=c.event.start,d=c.event.end||d,u=c.event.name||u),Object(S.jsx)(R,{className:"".concat(D,"--timeline-editor"),isOpen:c.isOpen,settings:a,onClose:f,children:c.isOpen&&Object(S.jsxs)("form",{className:"".concat(D,"--timeline-editor__form"),onSubmit:function(e){e.preventDefault();var a=m(),c=h(t,a.id);t[c]?t[c]=a:t.push(a);n(t),f()},children:[Object(S.jsxs)("h2",{className:"".concat(D,"--timeline-editor__title"),children:[r," event"]}),Object(S.jsxs)("div",{className:"".concat(D,"--timeline-editor__group"),children:[Object(S.jsx)("label",{className:"".concat(D,"--timeline-editor__label"),htmlFor:"name",children:"Event name"}),Object(S.jsx)(A,{className:"".concat(D,"--timeline-editor__input"),type:"text",name:"name",id:"name",defaultValue:u})]}),Object(S.jsxs)("div",{className:"".concat(D,"--timeline-editor__group"),children:[Object(S.jsx)("label",{className:"".concat(D,"--timeline-editor__label"),htmlFor:"start",children:"Start date"}),Object(S.jsx)(A,{className:"".concat(D,"--timeline-editor__input"),type:"text",name:"start",id:"start",placeholder:"mm/dd/yyyy",defaultValue:l})]}),Object(S.jsxs)("div",{className:"".concat(D,"--timeline-editor__group"),children:[Object(S.jsx)("label",{className:"".concat(D,"--timeline-editor__label"),htmlFor:"end",children:"End date"}),Object(S.jsx)(A,{className:"".concat(D,"--timeline-editor__input"),type:"text",name:"end",id:"end",placeholder:"mm/dd/yyyy",defaultValue:d})]}),Object(S.jsx)("input",{type:"hidden",name:"id",id:"id",defaultValue:o}),Object(S.jsx)(T,{className:"".concat(D,"--timeline-editor__btn"),type:"primary",children:"Save"}),"Edit"===r&&Object(S.jsx)(T,{className:"".concat(D,"--timeline-editor__btn"),type:"danger","aria-label":"Delete",onClick:function(e){e.preventDefault();var a=m(),c=h(t,a.id);t[c]&&t.splice(c,1);n(t),f()},children:Object(S.jsx)("i",{className:"fas fa-trash-alt"})})]})});function m(e){var t,n={},a=document.querySelector(".".concat(D,"--timeline-editor__form")),c=new FormData(a),r=Object(s.a)(c.entries());try{for(r.s();!(t=r.n()).done;){var o=Object(i.a)(t.value,2),l=o[0],d=o[1];n[l]=d}}catch(u){r.e(u)}finally{r.f()}return n.end||(n.end=n.start),n.name||(n.name="".concat(n.start,"-").concat(n.end)),n}function h(e,t){var n;return e.forEach((function(e,a){""+e.id===t&&(n=a)})),n}function f(){a({isOpen:!1,startDate:"",event:{name:"",id:"",start:"",end:""}})}},H=(n(24),function(){var e=Object(r.useState)(!0),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)(l,[]),Object(S.jsx)(T,{onClick:function(){var e=document.querySelector(".".concat(D,"--timeline-bg")),t=e.querySelector(".".concat(D,"--timeline-bg--item-active"));e.scroll({left:t.offsetLeft-(e.offsetWidth-t.offsetWidth)/2,behavior:"smooth"}),o(!0),l()},disabled:n,children:"Today"});function s(e){var t=e.target;clearInterval(a),a=setTimeout((function(){c&&(c=!1)}),200),c||(o(!1),t.removeEventListener("scroll",s))}function l(){var e=document.querySelector(".".concat(D,"--timeline-bg"));c=!0,e.addEventListener("scroll",s)}}),P=(n(25),function(e){var t=e.manageEditor;return Object(S.jsx)("aside",{className:"".concat(D,"--controls"),children:Object(S.jsxs)("ul",{className:"".concat(D,"--controls__group"),children:[Object(S.jsx)("li",{className:"".concat(D,"--controls__group-divider"),children:Object(S.jsx)(T,{type:"primary",onClick:function(){t({isOpen:!0})},children:"New event"})}),Object(S.jsx)("li",{children:Object(S.jsx)(H,{})}),Object(S.jsx)("li",{children:Object(S.jsx)(J,{})})]})})}),G=(n(26),j("air-title")||{val:"Timeline"}),K=function(e){var t=e.manageEditor,n=Object(r.useState)(G),a=Object(i.a)(n,2),c=a[0];a[1];return Object(S.jsxs)("header",{className:"".concat(D,"--header"),children:[Object(S.jsx)(P,{manageEditor:t}),Object(S.jsx)("h1",{onKeyUp:function(e){b("air-title",{val:e.target.innerText})},className:"".concat(D,"--page-title"),suppressContentEditableWarning:!0,contentEditable:"true",children:c.val})]})};n(27);j("air-events")||b("air-events",N.map((function(e){var t=e.start.split("-"),n=e.end.split("-");return t.push(t.shift()),n.push(n.shift()),e.start=t.join("/"),e.end=n.join("/"),e})));var U=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(j("air-events")||[]),o=Object(i.a)(c,2),s=o[0],l=o[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(K,{manageEditor:d}),Object(S.jsx)(q,{manageEditor:d,events:s}),Object(S.jsx)(B,{editorStatus:n,settings:d,events:s,setEvents:function(e){l(e),b("air-events",e)}})]});function d(e){a(e)}};Object(o.render)(Object(S.jsx)(U,{}),document.getElementById("root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.a126ff47.chunk.js.map